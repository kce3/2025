import streamlit as st

st.set_page_config(page_title="맞춤 건강식 배달", page_icon="🍱", layout="centered")
st.title("🍱 질환별 맞춤 건강식 배달 서비스")
st.write("여러 질환을 고려해 배달 가능한 건강식 메뉴를 추천합니다 🚚")

# -----------------------
# 1. 사용자 입력
# -----------------------
diseases = st.multiselect(
    "가지고 있는 질환 선택 (1개 이상 가능):",
    ["고혈압", "당뇨", "고지혈증", "과체중/비만", "빈혈", "위염", "역류성 식도염", "아토피/알레르기", "골다공증"]
)

# -----------------------
# 2. 질환별 추천 메뉴
# -----------------------
menu_db = {
    "고혈압": ["저염 두부덮밥", "고등어구이 정식", "닭가슴살 샐러드"],
    "당뇨": ["현미밥 도시락", "연어샐러드", "두부스테이크 도시락"],
    "고지혈증": ["귀리죽", "연어스테이크", "채소구이 플래터"],
    "과체중/비만": ["다이어트 도시락", "그릭요거트볼", "퀴노아 샐러드"],
    "빈혈": ["소고기 미역국 정식", "간볶음 덮밥", "시금치 오믈렛 도시락"],
    "위염": ["양배추죽", "감자수프", "바나나 스무디"],
    "역류성 식도염": ["닭죽", "흰살생선구이", "채소스프 + 호밀빵"],
    "아토피/알레르기": ["기본 도시락(쌀밥+채소+달걀)", "사과 샐러드", "채식 도시락"],
    "골다공증": ["두부 스테이크 정식", "멸치볶음과 시금치나물 도시락", "우유+요거트 스무디"]
}

# -----------------------
# 3. 메뉴 추천
# -----------------------
if diseases:
    # 선택한 질환들의 메뉴 합집합
    recommended_menus = set()
    for d in diseases:
        recommended_menus.update(menu_db.get(d, []))

    st.subheader("✅ 추천 메뉴")
    for m in recommended_menus:
        st.write(f"- {m}")

    # 하루 식단 예시 (선택 메뉴에서 3개)
    st.subheader("🍴 하루 식단 예시")
    menus = list(recommended_menus)
    st.info(f"""
    아침: {menus[0] if len(menus) > 0 else '건강식'}  
    점심: {menus[1] if len(menus) > 1 else '건강식'}  
    저녁: {menus[2] if len(menus) > 2 else '건강식'}  
    """)

    # 주문 버튼
    if st.button("🚚 이 식단 주문하기"):
        st.success("주문이 완료되었습니다! 곧 조리된 건강식이 배송됩니다 🥳")
else:
    st.info("하나 이상의 질환을 선택해주세요!")
